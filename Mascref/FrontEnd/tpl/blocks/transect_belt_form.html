<div class="panel panel-default" ng-repeat="category in belt_categories">
  <div class="panel-heading">
    <strong>{{category.name}}</strong>
  </div>
  <div class="panel-body">
    <div class="row">
      <div class="form-group col-sm-12">
        {{category.description}}
      </div>
    </div>
    <div class="row table-responsive">
      <table class="table table-striped b-t b-light text-sm">
        <thead>
          <tr>
            <th class="col-sm-3">Group</th>
            <th class="text-center" ng-repeat="seg in [0,1,2,3]" ng-init="segStart = (MASCREF_CONF.TRANSECT_SEGMENTS_LENGTH+MASCREF_CONF.TRANSECT_SEGMENTS_SPACE)*seg">{{segStart}} - {{segStart + MASCREF_CONF.TRANSECT_SEGMENTS_LENGTH}} m</th>
            <th class="text-center" style="width:75px;">Total</th>
            <th class="text-center" style="width:75px;">Mean</th>                           
            <th class="text-center" style="width:75px;">SD</th>              
          </tr>
        </thead>
        <tbody ng-if="belt_groups[category.id].length == 0">
          <tr><td colspan="8">No groups found on this category</td></tr>
        </tbody>
        <tbody ng-repeat="group in belt_groups[category.id]">
          <tr>
            <td>{{group.name}}</td>
            <td class="text-center" ng-repeat="seg in [0,1,2,3]">
              <div ng-if="group.sub_groups.length != 0">{{ belt_transect[group.id]['sub_groups'] | sum:seg }}</div>
              <div ng-if="group.sub_groups.length == 0"><input ng-model="belt_transect[group.id][seg]" type="text" class="form-control input-sm text-center" value="0" /></div>
            </td>
            <td class="text-center">{{ belt_transect[group.id] | sum }}</td>
            <td class="text-center">{{ belt_transect[group.id] | mean | number : MASCREF_CONF.SIGNIFICANT_DIGITS }}</td>
            <td class="text-center">{{ belt_transect[group.id] | sd | number : MASCREF_CONF.SIGNIFICANT_DIGITS }}</td>
          </tr>
          <tr ng-if="group.sub_groups.length != 0" ng-repeat="sub in group.sub_groups">
            <td>{{group.name}}</td>
            <td class="text-center" ng-repeat="seg in [0,1,2,3]">
              <input ng-model="belt_transect[group.id]['sub_groups'][sub.id][seg]" type="text" class="form-control input-sm text-center" value="0" ng-keyup="belt_transect[group.id][seg] = sum(belt_transect[group.id]['sub_groups'],seg)"/>
            </td>
            <td class="text-center">{{ belt_transect[group.id]['sub_groups'][sub.id] | sum }}</td>
            <td class="text-center">{{ belt_transect[group.id]['sub_groups'][sub.id] | mean | number : MASCREF_CONF.SIGNIFICANT_DIGITS }}</td>
            <td class="text-center">{{ belt_transect[group.id]['sub_groups'][sub.id] | sd | number : MASCREF_CONF.SIGNIFICANT_DIGITS }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>